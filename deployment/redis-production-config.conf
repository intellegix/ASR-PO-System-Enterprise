# ASR Purchase Order System - Production Redis Configuration
# Phase 4D - Deployment Setup
# Redis production optimization for caching and session management

# Basic Configuration
port 6379
bind 0.0.0.0
protected-mode yes
requirepass "your-secure-redis-password"

# Memory Management
maxmemory 512mb
maxmemory-policy allkeys-lru
maxmemory-samples 5

# Persistence (for production reliability)
# RDB Snapshots
save 900 1
save 300 10
save 60 10000

rdbcompression yes
rdbchecksum yes
dbfilename asr-po-system.rdb
dir /data

# AOF (Append Only File) for durability
appendonly yes
appendfilename "asr-po-system.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Performance Optimization
tcp-keepalive 300
timeout 300
tcp-backlog 511

# Slow Log (for monitoring)
slowlog-log-slower-than 10000
slowlog-max-len 128

# Client Configuration
maxclients 1000

# Security
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command KEYS ""
rename-command CONFIG ""
rename-command DEBUG ""
rename-command SHUTDOWN SHUTDOWN_ASR

# Logging
loglevel notice
logfile /var/log/redis/redis-asr-po.log

# Memory usage reporting
latency-monitor-threshold 100

# Network
tcp-nodelay yes
repl-timeout 60

# ASR PO System specific settings
# Keyspace notifications for cache invalidation
notify-keyspace-events Ex

# Database selection (use DB 0 for caching, DB 1 for sessions)
databases 16