# ASR Purchase Order System - Production Environment Configuration
# Copy this file to .env.production and replace all {{PLACEHOLDER}} values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Database URL for production
# Format: postgresql://username:password@hostname:port/database
DATABASE_URL={{PRODUCTION_DATABASE_URL}}

# Database connection pool settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_POOL_IDLE_TIMEOUT=30000

# ============================================================================
# REDIS CACHE CONFIGURATION
# ============================================================================

# Redis URL for session storage and caching
# Format: redis://username:password@hostname:port/database
REDIS_URL={{PRODUCTION_REDIS_URL}}

# Redis connection settings
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_DELAY=1000

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Environment designation
NODE_ENV=production

# Application URL (used for redirects and email links)
NEXTAUTH_URL={{PRODUCTION_APP_URL}}

# Session secret for NextAuth.js (generate with: openssl rand -hex 32)
NEXTAUTH_SECRET={{NEXTAUTH_SECRET_32_CHARS}}

# JWT secret for API authentication (generate with: openssl rand -hex 32)
JWT_SECRET={{JWT_SECRET_32_CHARS}}

# Application encryption key for sensitive data (generate with: openssl rand -hex 32)
ENCRYPTION_KEY={{ENCRYPTION_KEY_32_CHARS}}

# ============================================================================
# QUICKBOOKS INTEGRATION
# ============================================================================

# QuickBooks OAuth 2.0 Configuration
QB_CLIENT_ID={{QUICKBOOKS_CLIENT_ID}}
QB_CLIENT_SECRET={{QUICKBOOKS_CLIENT_SECRET}}
QB_ENVIRONMENT=production
QB_BASE_URL=https://api.intuit.com

# QuickBooks OAuth Redirect URL
QB_REDIRECT_URI={{PRODUCTION_APP_URL}}/api/quickbooks/callback

# QuickBooks API Configuration
QB_DISCOVERY_DOCUMENT=https://api.intuit.com/.well-known/openid_sandbox
QB_API_RATE_LIMIT=100

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================

# SMTP Server Configuration for email notifications
SMTP_HOST={{SMTP_HOST}}
SMTP_PORT={{SMTP_PORT:-587}}
SMTP_SECURE={{SMTP_SECURE:-true}}
SMTP_USER={{SMTP_USERNAME}}
SMTP_PASS={{SMTP_PASSWORD}}

# Email sender configuration
EMAIL_FROM={{SENDER_EMAIL_ADDRESS}}
EMAIL_FROM_NAME={{SENDER_NAME:-ASR Purchase Order System}}

# Email template configuration
EMAIL_LOGO_URL={{PRODUCTION_APP_URL}}/api/assets/logo.png
EMAIL_SUPPORT_EMAIL={{SUPPORT_EMAIL_ADDRESS}}

# ============================================================================
# LOGGING AND MONITORING
# ============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Application insights and monitoring
MONITOR_HEALTH_CHECK=true
MONITOR_PERFORMANCE=true

# Error tracking (optional - set if using error tracking service)
# SENTRY_DSN={{SENTRY_DSN}}

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# CORS allowed origins (comma-separated)
CORS_ORIGINS={{PRODUCTION_DOMAINS}}

# Rate limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# Content Security Policy
CSP_REPORT_URI={{PRODUCTION_APP_URL}}/api/csp-report

# ============================================================================
# FILE STORAGE AND UPLOADS
# ============================================================================

# File upload limits
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,png,jpg,jpeg

# File storage configuration
UPLOAD_DIR=/var/uploads/po-system
TEMP_DIR=/tmp/po-system

# ============================================================================
# BACKUP AND DISASTER RECOVERY
# ============================================================================

# Backup configuration
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION={{BACKUP_STORAGE_PATH}}

# Backup encryption key (generate with: openssl rand -hex 32)
BACKUP_ENCRYPTION_KEY={{BACKUP_ENCRYPTION_KEY}}

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================

# Caching configuration
CACHE_TTL_DASHBOARD=300
CACHE_TTL_REPORTS=600
CACHE_TTL_VENDORS=1800

# Database query optimization
DB_QUERY_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# ============================================================================
# INTEGRATION SETTINGS
# ============================================================================

# Phone integration (for click-to-call features)
PHONE_INTEGRATION_ENABLED=true

# Mobile app settings
PWA_ENABLED=true
PWA_OFFLINE_CACHE=true

# ============================================================================
# VALIDATION CHECKLIST
# ============================================================================

# Before deploying, verify:
# □ All {{PLACEHOLDER}} values have been replaced
# □ Database connection tested successfully
# □ Redis connection tested successfully
# □ QuickBooks OAuth callback URL registered
# □ SMTP credentials tested for email delivery
# □ SSL certificates configured
# □ Backup storage location accessible
# □ All secrets are 32+ characters long
# □ CORS origins match production domains
# □ File upload directories exist and have correct permissions

# ============================================================================
# SUPPORT INFORMATION
# ============================================================================

# For configuration support:
# - Reference: docs/OPERATIONS.md Section 2 (Environment Management)
# - Contact: {{SYSTEM_ADMINISTRATOR_EMAIL}}
# - Emergency: {{EMERGENCY_CONTACT_INFO}}